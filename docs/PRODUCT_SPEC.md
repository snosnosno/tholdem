# 📋 T-HOLDEM 제품 사양서

**최종 업데이트**: 2025년 2월 4일  
**상태**: 🏆 **Week 4 완료 - 프로덕션 배포 최적화**  
**버전**: v5.0.0

## 🎯 제품 개요

### 비전
홀덤 포커 토너먼트 운영의 디지털 전환을 선도하는 종합 관리 플랫폼

### 핵심 가치
- **효율성**: 수동 작업 90% 자동화
- **정확성**: 실시간 데이터 동기화
- **투명성**: 모든 운영 데이터 추적 가능

## 🔥 핵심 기능

### 1. 토너먼트 관리
- **참가자 관리**
  - CSV 일괄 업로드
  - 칩 카운트 실시간 추적
  - 자동 테이블 배치 알고리즘
  
- **게임 운영**
  - 블라인드 스케줄 자동화
  - 딜러 교대 관리
  - 실시간 순위 업데이트

### 2. 스태프 관리
- **출퇴근 시스템**
  - QR 코드 스캔
  - 실시간 출석 상태
  - 위치 기반 검증
  
- **급여 관리**
  - 자동 급여 계산
  - 수당/공제 관리
  - 일괄 정산 기능

### 3. 구인구직 시스템
- **공고 관리**
  - 역할별 시급 설정
  - 다중 포지션 모집
  - 자동 마감 처리
  - 다중 날짜 선택 지원
  - 날짜별 독립적 요구사항 설정
  
- **지원자 관리**
  - 원클릭 승인/거절
  - 스태프 자동 전환
  - 이력 관리
  
- **UI 개선사항** (NEW)
  - 날짜 표시: "8월 25일 (월)" 한글 형식
  - 복리후생 식사 체크 시 "제공" 자동 입력
  - 관리자 버튼 카드 하단 균등 배치

### 4. 관리자 대시보드
- **실시간 모니터링**
  - 운영 현황 대시보드
  - 성능 지표 (Web Vitals)
  - 에러 추적 (Sentry)

## 💼 사용자 역할

### 관리자 (Admin)
- 전체 시스템 관리 권한
- 토너먼트 생성/운영
- 스태프 관리
- 정산 승인

### 매니저 (Manager)
- 일일 운영 관리
- 스태프 출퇴근 관리
- 실시간 현황 모니터링

### 스태프 (Staff)
- QR 출퇴근
- 개인 일정 확인
- 급여 내역 조회

## 🔄 핵심 워크플로우

### 토너먼트 운영 플로우
```
1. 토너먼트 생성 → 2. 참가자 등록 → 3. 테이블 배치
→ 4. 게임 진행 → 5. 칩 카운트 업데이트 → 6. 결과 집계
```

### 스태프 관리 플로우
```
1. 구인공고 등록 → 2. 지원자 모집 → 3. 선발/승인
→ 4. 스태프 등록 → 5. 일정 배정 → 6. 출퇴근 관리 → 7. 급여 정산
```

### 일일 운영 플로우
```
오전: 스태프 체크인 → 포지션 배치 → 토너먼트 시작
오후: 실시간 모니터링 → 교대 관리 → 칩 카운트 업데이트
종료: 체크아웃 → 정산 확인 → 리포트 생성
```

## 📊 데이터 구조

### Firebase Collections
```
- tournaments/     # 토너먼트 정보
- participants/    # 참가자 데이터
- staff/          # 스태프 기본 정보
- workLogs/       # 근무 기록
- jobPostings/    # 구인공고
- applicants/     # 지원자
```

### 실시간 동기화
- Firestore onSnapshot 구독
- 낙관적 UI 업데이트
- 오프라인 지원

## 🚀 기술 사양

### Frontend
- React 18 + TypeScript (Strict Mode)
- Tailwind CSS 3.3
- Zustand 상태 관리

### Backend
- Firebase (Auth, Firestore, Functions)
- 실시간 구독 (onSnapshot)
- 자동 백업 시스템

### 성능 최적화 (Week 4 완료)
- **Web Workers**: 메인 스레드 블로킹 완전 제거 (2-5초 → 0초)
- **가상화**: 1000+ 아이템 리스트 성능 99% 개선 
- **스마트 캐싱**: 92% 히트율, IndexedDB 기반 영구 캐시
- **지연 로딩**: 모든 탭 컴포넌트 코드 스플리팅
- 번들 크기: 278.56KB (13% 감소)
- 초기 로딩: 1.2초 (70% 향상)
- Lighthouse: 91점
- E2E 테스트 커버리지: 85%

## 🔐 보안 & 규정

### 보안
- Firebase Security Rules
- CSP (Content Security Policy)
- XSS 방지 (DOMPurify)
- CSRF 토큰

### 규정 준수
- GDPR 준수
- 개인정보보호법 준수
- 접근성 WCAG 2.1 AA

## 📈 성과 지표 - 🏆 Week 4 완성!

| 지표 | Week 1 | Week 4 최종 | 개선율 |
|------|--------|-------------|--------|
| 💰 **월 운영비** | 30만원 | 7만원 | **77% 절약** |
| ⚡ **로딩 속도** | 3-4초 | 1.2초 | **70% 향상** |
| 🧠 **메모리 사용량** | 100% | 10% | **90% 감소** |
| 📊 **Firebase 호출** | 100% | 10% | **90% 감소** |
| 🎯 **캐시 히트율** | 0% | 92% | **신규 구축** |
| 📦 **번들 크기** | 320KB | 278KB | **13% 감소** |
| 🧪 **테스트 커버리지** | 30% | 85% | **55% 향상** |
| 🐛 **TypeScript 에러** | 26개 | 0개 | **100% 해결** |

## 🎯 로드맵

### ✅ 완료된 작업 (Week 4)
- [x] **Web Workers 시스템**: 메인 스레드 블로킹 완전 제거
- [x] **가상화 시스템**: 대용량 리스트 성능 최적화
- [x] **스마트 캐싱**: IndexedDB 기반 영구 캐시 구축
- [x] **지연 로딩**: 모든 컴포넌트 코드 스플리팅
- [x] **E2E 테스트**: Playwright 기반 자동화 테스트 (85% 커버리지)
- [x] **보안 강화**: Firebase 키 완전 보호
- [x] **TypeScript 완성**: 에러 0개 달성

### 단기 (1-3개월)
- [ ] 모바일 앱 개발 (React Native)
- [ ] 국제화 (i18n) 완성
- [ ] AI 기반 스태프 매칭 시스템

### 중기 (3-6개월)
- [ ] 블록체인 기반 칩 추적
- [ ] 고급 분석 대시보드
- [ ] 글로벌 토너먼트 네트워크

### 장기 (6-12개월)
- [ ] ML 기반 부정행위 탐지
- [ ] 실시간 스트리밍 통합
- [ ] 차세대 플랫폼 확장

---

*이 문서는 기능명세서, PRD, 워크플로우를 통합한 단일 제품 사양서입니다.*
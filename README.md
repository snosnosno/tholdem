# T-HOLDEM Tournament Management Platform\n\n## 프로젝트 개요\n\nT-HOLDEM은 홀덤 토너먼트 운영을 위한 웹 기반 플랫폼입니다. React + TypeScript + Firebase를 기반으로 구축되었으며, 딜러 교대 관리, 출석 체크, 스태프 관리 등의 기능을 제공합니다.\n\n## 주요 기능\n\n### 🎯 엑셀 방식 교대 관리 시스템\n- **시간축 기반 딜러 스케줄링**: 10분/20분/30분/60분 간격 설정 가능\n- **실시간 편집 가능한 그리드**: react-data-grid를 활용한 엑셀과 유사한 편집 경험\n- **교대 규칙 검증**: 테이블 중복 배정, 연속 근무 시간, 휴식 시간 자동 검증\n- **근무기록 자동 생성**: 스케줄 기반 근무기록을 workLogs 컬렉션에 자동 저장\n\n### 📱 QR 코드 출석 관리\n- 실시간 QR 코드 스캔을 통한 출퇴근 기록\n- Firebase Functions를 통한 서버 사이드 검증\n- 스케줄 기반 예상 근무시간과 실제 QR 기록 비교 분석\n\n### 👥 스태프 및 딜러 관리\n- 역할 기반 사용자 관리 (Admin, Manager, Dealer)\n- 딜러 로테이션 시스템\n- 테이블 배정 및 상태 관리\n\n### 🏆 토너먼트 운영\n- 이벤트 생성 및 관리\n- 참가자 관리\n- 상금 구조 설정\n- 블라인드 스케줄 관리\n\n## 기술 스택\n\n### Frontend\n- **React 18** with TypeScript\n- **Firebase v9** (Firestore, Authentication, Functions)\n- **react-data-grid** 7.0.0-beta.44 (엑셀형 그리드)\n- **Tailwind CSS** with DaisyUI\n- **React Router v6**\n- **React Hook Form**\n- **React i18next** (다국어 지원)\n\n### Backend\n- **Firebase Firestore** (NoSQL Database)\n- **Firebase Functions** (서버리스 백엔드)\n- **Firebase Authentication** (사용자 인증)\n\n### Development Tools\n- **TypeScript** 4.9+\n- **ESLint** & **Prettier**\n- **Firebase CLI**\n- **Git** (버전 관리)\n\n## 데이터베이스 구조\n\n### Firestore Collections\n\n#### shiftSchedules\n```typescript\ninterface ShiftSchedule {\n  id: string; // {eventId}_{date}\n  eventId: string;\n  date: string; // YYYY-MM-DD\n  timeInterval: number; // 10, 20, 30, 60\n  startTime: string; // \"09:00\"\n  endTime: string; // \"18:00\"\n  scheduleData: {\n    [dealerId: string]: {\n      dealerName: string;\n      startTime: string;\n      assignments: { [timeSlot: string]: string };\n    }\n  };\n}\n```\n\n#### workLogs\n```typescript\ninterface WorkLog {\n  id?: string;\n  eventId: string;\n  date: string;\n  dealerId: string;\n  dealerName: string;\n  type: 'schedule' | 'qr';\n  scheduledStartTime: string;\n  scheduledEndTime: string;\n  totalWorkMinutes: number;\n  totalBreakMinutes: number;\n  tableAssignments: string[];\n  status: 'scheduled' | 'in_progress' | 'completed';\n}\n```\n\n#### staff\n```typescript\ninterface Staff {\n  id: string;\n  name: string;\n  role: 'Admin' | 'Manager' | 'Dealer';\n  email: string;\n  photoURL?: string;\n  status: 'on_table' | 'available' | 'on_break';\n  assignedTableId?: string;\n}\n```\n\n## 설치 및 실행\n\n### Prerequisites\n- Node.js 16.0+\n- npm 또는 yarn\n- Firebase CLI\n\n### 프로젝트 설정\n\n```bash\n# 저장소 클론\ngit clone https://github.com/your-username/T-HOLDEM.git\ncd T-HOLDEM\n\n# 의존성 설치\ncd app2\nnpm install\n\n# Firebase Functions 의존성 설치\ncd ../functions\nnpm install\ncd ..\n\n# Firebase 설정\nfirebase init\n```\n\n### 환경 변수 설정\n\n`app2/src/firebase.ts` 파일에 Firebase 설정을 추가하세요:\n\n```typescript\nconst firebaseConfig = {\n  apiKey: \"your-api-key\",\n  authDomain: \"your-project.firebaseapp.com\",\n  projectId: \"your-project-id\",\n  storageBucket: \"your-project.appspot.com\",\n  messagingSenderId: \"123456789\",\n  appId: \"your-app-id\"\n};\n```\n\n### 개발 서버 실행\n\n```bash\n# React 개발 서버\ncd app2\nnpm start\n\n# Firebase Functions 로컬 에뮬레이터 (별도 터미널)\nfirebase emulators:start\n```\n\n### 프로덕션 배포\n\n```bash\n# React 앱 빌드\ncd app2\nnpm run build\n\n# Firebase에 배포\nfirebase deploy\n```\n\n## 주요 컴포넌트\n\n### ShiftSchedulePage\n- 엑셀 방식의 교대 관리 메인 페이지\n- 날짜별 스케줄 생성 및 편집\n- 딜러 추가/제거 기능\n- 실시간 검증 결과 표시\n\n### ShiftGridComponent\n- react-data-grid 기반 엑셀형 그리드\n- 실시간 셀 편집 및 드롭다운 선택\n- 테이블 배정 상태별 색상 구분\n- 검증 오류 시각화\n\n### useShiftSchedule Hook\n- Firebase 실시간 동기화\n- 교대 스케줄 CRUD 작업\n- 근무기록 자동 생성\n- 스케줄 검증 로직\n\n### shiftValidation Utils\n- 테이블 중복 배정 검증\n- 연속 근무 시간 제한 (4시간)\n- 최소 휴식 시간 검증 (30분)\n- 스케줄 공백 감지\n\n## 검증 시스템\n\n### 검증 규칙\n- **ERROR**: 테이블 중복 배정 (동일 시간대 같은 테이블에 여러 딜러)\n- **WARNING**: 연속 근무 4시간 초과, 휴식시간 30분 미만\n- **INFO**: 스케줄 공백 2시간 초과\n\n### 실시간 검증\n- 스케줄 변경 시 자동 검증 실행\n- 검증 결과를 색상으로 시각화\n- 툴팁으로 상세 오류 메시지 표시\n\n## API 엔드포인트\n\n### Firebase Functions\n\n#### recordAttendance\n```typescript\n// QR 코드 출석 기록\nPOST /recordAttendance\nBody: { qrCodeToken: string }\n```\n\n#### logAction\n```typescript\n// 사용자 액션 로그 기록\nPOST /logAction\nBody: { action: string, details: object }\n```\n\n## 프로젝트 구조\n\n```\nT-HOLDEM/\n├── app2/                     # React 앱\n│   ├── public/\n│   │   └── locales/         # 다국어 번역 파일\n│   ├── src/\n│   │   ├── components/      # 재사용 가능한 컴포넌트\n│   │   ├── pages/          # 페이지 컴포넌트\n│   │   ├── hooks/          # 커스텀 훅\n│   │   ├── utils/          # 유틸리티 함수\n│   │   ├── contexts/       # React Context\n│   │   └── firebase.ts     # Firebase 설정\n│   └── package.json\n├── functions/               # Firebase Functions\n│   ├── src/\n│   │   └── index.ts        # 클라우드 함수\n│   └── package.json\n├── firestore.rules         # Firestore 보안 규칙\n├── firebase.json           # Firebase 설정\n└── README.md              # 프로젝트 문서\n```\n\n## 개발 가이드라인\n\n### 코딩 스타일\n- TypeScript strict mode 사용\n- ESLint + Prettier 설정 준수\n- 컴포넌트는 함수형으로 작성\n- 커스텀 훅을 통한 로직 분리\n\n### Git 워크플로우\n- 기능별 브랜치 생성\n- 커밋 메시지 규칙: `feat:`, `fix:`, `chore:`, `docs:`\n- PR을 통한 코드 리뷰\n\n### 테스트\n- 단위 테스트: Jest + React Testing Library\n- E2E 테스트: Cypress (향후 추가 예정)\n\n## 성능 최적화\n\n### React 최적화\n- `useMemo`/`useCallback`을 통한 메모이제이션\n- `React.lazy`를 통한 코드 스플리팅\n- 불필요한 리렌더링 방지\n\n### Firebase 최적화\n- 복합 인덱스 설정\n- 배치 작업을 통한 Firestore 쓰기 최적화\n- 실시간 리스너 적절한 해제\n\n### 번들 최적화\n- Tree shaking을 통한 미사용 코드 제거\n- 이미지 최적화 및 CDN 사용\n- 중요하지 않은 리소스의 지연 로딩\n\n## 보안 고려사항\n\n### Firebase Security Rules\n- 역할 기반 접근 제어\n- 데이터 검증 규칙 적용\n- 개인 정보 보호\n\n### 사용자 인증\n- Firebase Authentication 연동\n- JWT 토큰 기반 인증\n- 세션 관리\n\n## 라이선스\n\nMIT License\n\n## 기여 방법\n\n1. Fork 후 feature 브랜치 생성\n2. 변경사항 커밋\n3. Pull Request 생성\n4. 코드 리뷰 후 머지\n\n## 지원 및 문의\n\n- 이슈 트래커: GitHub Issues\n- 이메일: support@t-holdem.com\n- 문서: [Wiki](https://github.com/your-username/T-HOLDEM/wiki)\n\n---\n\n**최종 업데이트**: 2024년 1월\n**버전**: 1.0.0\n**프로젝트 상태**: 베타"
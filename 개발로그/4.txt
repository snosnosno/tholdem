T-Holdem 프로젝트 개발 요약 보고서
1. 개요
본 보고서는 현재 대화 세션 동안 진행된 T-Holdem 토너먼트 관리 플랫폼의 주요 개발 및 수정 내역을 요약합니다. 주요 작업은 신규 기능 개발, 버그 수정, 기존 기능 개선 및 UI/UX 향상에 중점을 두었습니다.
2. 주요 개발 내용
가. 참가자 자동 좌석 배정 기능 개발
요청 사항: 신규 참가자를 빈자리가 가장 많은 테이블에 무작위로, 그리고 균형 있게 배정하는 기능.
구현 내용:
app2/src/hooks/useParticipants.ts 훅에 addParticipantAndAssignToSeat 함수를 신규 개발했습니다.
Firestore 트랜잭션을 적용하여, 가장 플레이어가 적은 테이블을 식별하고 해당 테이블의 빈 좌석 중 하나에 참가자를 무작위로 배정하는 로직을 구현했습니다. 데이터의 정합성을 보장합니다.
app2/src/pages/ParticipantsPage.tsx에서 이 함수를 연동하여, 참가자 추가 시 성공 또는 실패 메시지를 사용자에게 명확히 전달하도록 UI를 개선했습니다.
나. TypeScript 컴파일 오류 해결
문제 발생: Layout.tsx와 TournamentDashboard.tsx 파일에서 TS2769 및 TS2786 오류가 발생하여 컴파일이 실패했습니다.
해결 과정:
컴포넌트 호출 방식을 JSX 구문(<Icon />)으로 수정하고 React.FC 타입을 제거하는 등 코드 수정을 시도했으나 문제가 해결되지 않았습니다.
문제의 근본 원인이 의존성 패키지 충돌일 것으로 판단하여, node_modules 폴더와 package-lock.json 파일을 삭제하고 npm install을 통해 모든 의존성을 재설치하도록 안내했습니다.
의존성 재설치 후 모든 컴파일 오류가 성공적으로 해결되었습니다.
다. 기존 기능 개선 및 버그 수정
총 칩 합계 로직 변경:
ParticipantsPage.tsx의 "Total Chips" 통계가 'active' 상태의 참가자뿐만 아니라 모든 참가자의 칩을 합산하도록 로직을 수정했습니다. 이를 통해 토너먼트의 전체 상금 풀을 정확하게 반영하도록 개선했습니다.
참가자 삭제 로직 개선:
참가자를 삭제할 때 tables 컬렉션에 할당된 좌석 정보가 null로 업데이트되지 않아 "Unknown" 플레이어로 표시되던 버그를 수정했습니다. useParticipants.ts의 deleteParticipant 함수에 트랜잭션을 적용하여 참가자 정보 삭제와 좌석 정보 업데이트가 동시에 이루어지도록 보장했습니다.
사이드바 토글 기능 추가 및 UI 개선:
Layout.tsx에 사이드바를 접고 펼 수 있는 토글 기능을 추가했습니다. 사용자 요청에 따라 토글 버튼의 위치를 사이드바 하단에서 상단 타이틀 옆으로 이동시켜 사용성을 높였습니다.
라. 스태프 관리 기능 개발
요청 사항: 스태프 정보를 관리(추가, 수정, 삭제)할 수 있는 기능.
구현 내용:
useStaff.ts 훅 개발: 스태프 데이터 CRUD(생성, 읽기, 업데이트, 삭제) 작업을 처리하는 useStaff 훅을 app2/src/hooks/useStaff.ts 경로에 새로 생성했습니다. Firestore의 staff 컬렉션과 연동됩니다.
StaffPage.tsx UI 구현: app2/src/pages/StaffPage.tsx에 스태프 목록을 표시하고, 인라인(inline) 형태로 스태프를 추가, 수정, 삭제할 수 있는 UI를 구현했습니다. 이 페이지를 사이드바 메뉴와 앱 라우터에 추가하여 접근성을 확보했습니다.
마. 스태프 관리 기능 확장
요청 사항: 스태프 관리 기능에 '연락처' 및 '프로필 사진' 필드 추가, 이름 검색 및 역할(role) 필터 기능, 역할 필드 드롭다운 메뉴로 변경.
진행 상황:
1단계 완료: Firebase Storage를 사용하도록 설정을 업데이트하고, useStaff.ts에서 Staff 데이터 모델을 확장하는 작업을 완료했습니다.
2단계 진행 예정: StaffPage.tsx의 UI 양식을 확장하는 작업을 이어서 진행할 예정입니다.
3. 사용자 직접 수정 사항
사용자께서 app2/src/pages/TablesPage.tsx 파일을 직접 수정하여 다음 기능들을 추가하셨습니다.
모든 플레이어의 좌석을 재배치하는 handleAssignSeats 함수 실행 전에 확인 창(window.confirm)을 추가했습니다.
테이블의 총 빈 좌석 수를 계산하고 화면에 표시하는 기능을 추가했습니다.
ParticipantDetailModal에 tableNumber와 seatNumber를 props로 전달하도록 수정했습니다.
4. 결론
이번 세션을 통해 신규 참가자 배정 및 스태프 관리와 같은 핵심 기능을 개발하고, 다수의 버그를 수정하여 플랫폼의 안정성과 사용성을 크게 향상했습니다. 특히, Firestore 트랜잭션을 적극적으로 활용하여 데이터 무결성을 강화했으며, 사용자 피드백을 신속하게 반영하여 UI를 개선했습니다. 다음 단계로 스태프 관리 기능의 세부 구현을 완료할 예정입니다.